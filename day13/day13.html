<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
    <style>
        .cards{
            display: flex;
            gap: 1em;
            flex-wrap: wrap;
        }

        .card{
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.345);
            border-radius: 5px;
            padding: 1em;
            flex-grow: 1;
            flex-basis: 200px;
        }
    </style>
<body>
    <h1>Day 13 - JS</h1>

    <h1>Promises</h1>


    <p class="data"></p>

    <div class="cards"></div>

    <script>

        /*
        Synchronous vs Asynchronous

        Why we hate synchronous
        Why we need asynchronous

        Promises
        
        */


        const prom = new Promise(function (resolve, reject) {

            const xhttp = new XMLHttpRequest()
            xhttp.onload = function () {
                if (this.status == 200) {
                    resolve(this.responseText)
                } else {
                    reject("Data not found")
                }
            }
            xhttp.open('GET', 'https://jsonplaceholder.typicode.com/users', true)
            xhttp.send()

        })

        const data = document.querySelector('.data')

        prom.then(function (res) {
            // console.log(JSON.parse(res));
            // data.innerHTML = res
            cardMaker(JSON.parse(res))
        }).catch(function (err) {
            console.log(err);
            data.innerHTML = err
        })


        function cardMaker(data) {
            let str = ''
            console.log(data);
            data.forEach(function (item) {
                console.log(item);
                str += `
                <div class="card">
                    <h2>${item.name}</h2>
                <p>${item.email}</p>
                    </div>
                `
            })

            document.querySelector('.cards').innerHTML = str

            console.log(str);
        }




        function sum() {
            console.log("Sum");
        }

        function product() {
            console.log("Product");
        }

        function loop() {
            for (let i = 0; i < 100; i++)
                console.log(i);
        }

        // setTimeout(loop, 2000);
        sum()
        product()



    </script>
</body>

</html>